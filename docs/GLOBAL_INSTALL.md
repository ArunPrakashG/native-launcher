#!/bin/bash

# Demo script showing global vs local installation differences

# Colors

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo " Global vs Local Installation Comparison"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "═══════════════════════════════════════════════════════════════"
echo -e "${BLUE}LOCAL INSTALLATION (Default)${NC}"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "Command:"
echo " curl -fsSL https://...install.sh | bash"
echo " # or"
echo " ./install.sh"
echo ""
echo "Binary location:"
echo " ~/.local/bin/native-launcher"
echo ""
echo "Requirements:"
echo " ✓ No sudo required"
echo " ✓ User-only installation"
echo " ⚠ Requires ~/.local/bin in PATH"
echo ""
echo "Advantages:"
echo " + No admin privileges needed"
echo " + Doesn't affect other users"
echo " + Easy to uninstall"
echo " + Standard XDG location"
echo ""
echo "Potential issues:"
echo " - PATH may not include ~/.local/bin in compositor contexts"
echo " - Daemon/keybinds need absolute paths"
echo ""
echo "Compositor config uses:"
echo " exec-once = /home/user/.local/bin/native-launcher --daemon"
echo " bind = SUPER, Space, exec, /home/user/.local/bin/native-launcher"
echo ""

echo "═══════════════════════════════════════════════════════════════"
echo -e "${GREEN}GLOBAL INSTALLATION (--global)${NC}"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "Command:"
echo " curl -fsSL https://...install.sh | bash -s -- --global"
echo " # or"
echo " ./install.sh --global"
echo ""
echo "Binary location:"
echo " /usr/local/bin/native-launcher"
echo ""
echo "Requirements:"
echo " ✓ Requires sudo"
echo " ✓ System-wide installation"
echo " ✓ Always in PATH"
echo ""
echo "Advantages:"
echo " + /usr/local/bin is always in system PATH"
echo " + Works in all contexts (compositor, daemon, etc.)"
echo " + No PATH configuration needed"
echo " + Multiple users can use it"
echo " + Same pattern as system packages (like nautilus)"
echo ""
echo "Considerations:"
echo " - Requires sudo for install/uninstall"
echo " - Affects all users on the system"
echo ""
echo "Compositor config uses:"
echo " exec-once = /usr/local/bin/native-launcher --daemon"
echo " bind = SUPER, Space, exec, /usr/local/bin/native-launcher"
echo ""

echo "═══════════════════════════════════════════════════════════════"
echo -e "${YELLOW}RECOMMENDATION${NC}"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "Use LOCAL installation if:"
echo " • You don't have sudo access"
echo " • You want user-only installation"
echo " • You're testing or developing"
echo ""
echo "Use GLOBAL installation if:"
echo " • You want system-wide availability"
echo " • You're having PATH issues with compositor/daemon"
echo " • Multiple users need access"
echo " • You prefer system-wide tools (like apt/pacman packages)"
echo ""

echo "═══════════════════════════════════════════════════════════════"
echo "UNINSTALLATION"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "Local uninstall:"
echo " ./uninstall.sh"
echo ""
echo "Global uninstall:"
echo " ./uninstall.sh --global"
echo ""

echo "═══════════════════════════════════════════════════════════════"
echo "SOLVING THE ORIGINAL ISSUE"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "Problem:"
echo " native-launcher not found after reboot"
echo " ~/.local/bin not in PATH for compositor auto-start"
echo ""
echo "Solution 1: Use absolute paths (CURRENT)"
echo " Compositor configs now use:"
echo " /home/user/.local/bin/native-launcher"
echo " ✓ Works with local installation"
echo " ✓ No sudo required"
echo ""
echo "Solution 2: Use global installation (NEW)"
echo " Install to /usr/local/bin with --global"
echo " ✓ Always in PATH"
echo " ✓ Works everywhere"
echo " ⚠ Requires sudo"
echo ""

echo "Both solutions fix the 'command not found' issue!"
echo ""

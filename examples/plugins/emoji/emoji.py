#!/usr/bin/env python3
"""
Emoji search plugin for Native Launcher
Searches through emoji database and provides copy-to-clipboard functionality
"""

import json
import sys

# Comprehensive emoji database with keywords
EMOJI_DATABASE = {
    "ðŸ˜€": ["grinning", "smile", "happy", "joy"],
    "ðŸ˜ƒ": ["smile", "happy", "joy", "grin"],
    "ðŸ˜„": ["smile", "happy", "joy", "laugh"],
    "ðŸ˜": ["grin", "smile", "happy"],
    "ðŸ˜†": ["laugh", "happy", "satisfied"],
    "ðŸ˜…": ["sweat", "smile", "relief"],
    "ðŸ¤£": ["rofl", "laugh", "rolling", "floor"],
    "ðŸ˜‚": ["joy", "tears", "laugh", "crying"],
    "ðŸ™‚": ["smile", "slight"],
    "ðŸ™ƒ": ["upside", "down", "silly"],
    "ðŸ˜‰": ["wink", "flirt"],
    "ðŸ˜Š": ["blush", "smile", "happy"],
    "ðŸ˜‡": ["angel", "halo", "innocent"],
    "ðŸ¥°": ["love", "hearts", "adore"],
    "ðŸ˜": ["heart", "eyes", "love"],
    "ðŸ¤©": ["star", "eyes", "excited"],
    "ðŸ˜˜": ["kiss", "love", "heart"],
    "ðŸ˜—": ["kiss", "lips"],
    "ðŸ˜š": ["kiss", "closed", "eyes"],
    "ðŸ˜™": ["kiss", "smile"],
    "ðŸ¥²": ["smile", "tear", "touched"],
    "ðŸ˜‹": ["yum", "delicious", "tongue"],
    "ðŸ˜›": ["tongue", "playful"],
    "ðŸ˜œ": ["wink", "tongue", "playful"],
    "ðŸ¤ª": ["crazy", "wild", "zany"],
    "ðŸ˜": ["tongue", "squint", "playful"],
    "ðŸ¤‘": ["money", "rich", "dollar"],
    "ðŸ¤—": ["hug", "embrace"],
    "ðŸ¤­": ["oops", "giggle", "hand", "over", "mouth"],
    "ðŸ¤«": ["shh", "quiet", "silence"],
    "ðŸ¤”": ["think", "thinking", "hmm", "consider"],
    "ðŸ¤": ["zipper", "mouth", "silent", "secret"],
    "ðŸ¤¨": ["raised", "eyebrow", "skeptical"],
    "ðŸ˜": ["neutral", "meh", "straight"],
    "ðŸ˜‘": ["expressionless", "blank"],
    "ðŸ˜¶": ["no", "mouth", "silent"],
    "ðŸ˜": ["smirk", "smug"],
    "ðŸ˜’": ["unamused", "unhappy", "meh"],
    "ðŸ™„": ["roll", "eyes", "annoyed"],
    "ðŸ˜¬": ["grimace", "awkward", "teeth"],
    "ðŸ˜”": ["pensive", "sad", "thoughtful"],
    "ðŸ˜ª": ["sleepy", "tired", "sleep"],
    "ðŸ¤¤": ["drool", "hungry"],
    "ðŸ˜´": ["sleeping", "zzz", "sleep"],
    "ðŸ˜·": ["mask", "sick", "medical"],
    "ðŸ¤’": ["thermometer", "sick", "fever"],
    "ðŸ¤•": ["bandage", "hurt", "injured"],
    "ðŸ¤¢": ["nausea", "sick", "green"],
    "ðŸ¤®": ["vomit", "sick", "throw up"],
    "ðŸ¤§": ["sneeze", "sick", "achoo"],
    "ðŸ¥µ": ["hot", "heat", "sweating"],
    "ðŸ¥¶": ["cold", "freezing", "frozen"],
    "ðŸ˜µ": ["dizzy", "dead", "knocked out"],
    "ðŸ¤¯": ["mind", "blown", "explode"],
    "ðŸ˜³": ["flushed", "embarrassed", "shocked"],
    "ðŸ¥º": ["pleading", "puppy", "eyes", "please"],
    "ðŸ˜¢": ["cry", "sad", "tear"],
    "ðŸ˜­": ["sob", "crying", "bawl", "sad"],
    "ðŸ˜¤": ["triumph", "mad", "huff"],
    "ðŸ˜ ": ["angry", "mad", "upset"],
    "ðŸ˜¡": ["rage", "angry", "pouting", "red"],
    "ðŸ¤¬": ["cursing", "swear", "symbols"],
    "ðŸ˜ˆ": ["devil", "evil", "purple"],
    "ðŸ‘¿": ["devil", "angry", "purple"],
    "ðŸ’€": ["skull", "dead", "death"],
    "â˜ ï¸": ["skull", "crossbones", "poison", "pirate"],
    "ðŸ’©": ["poop", "pile", "of", "poo"],
    "ðŸ¤¡": ["clown", "joke"],
    "ðŸ‘¹": ["ogre", "monster", "japanese"],
    "ðŸ‘º": ["goblin", "monster", "japanese"],
    "ðŸ‘»": ["ghost", "boo", "spooky"],
    "ðŸ‘½": ["alien", "ufo", "extraterrestrial"],
    "ðŸ‘¾": ["alien", "monster", "game"],
    "ðŸ¤–": ["robot", "bot", "ai"],
    "ðŸ˜º": ["cat", "smile", "happy"],
    "ðŸ˜¸": ["cat", "grin", "happy"],
    "ðŸ˜¹": ["cat", "joy", "tears"],
    "ðŸ˜»": ["cat", "heart", "eyes", "love"],
    "ðŸ˜¼": ["cat", "wry", "smirk"],
    "ðŸ˜½": ["cat", "kiss"],
    "ðŸ™€": ["cat", "scream", "shocked"],
    "ðŸ˜¿": ["cat", "cry", "sad"],
    "ðŸ˜¾": ["cat", "pouting", "grumpy"],
    "â¤ï¸": ["heart", "red", "love"],
    "ðŸ§¡": ["orange", "heart", "love"],
    "ðŸ’›": ["yellow", "heart", "love"],
    "ðŸ’š": ["green", "heart", "love"],
    "ðŸ’™": ["blue", "heart", "love"],
    "ðŸ’œ": ["purple", "heart", "love"],
    "ðŸ–¤": ["black", "heart", "dark"],
    "ðŸ¤": ["white", "heart", "pure"],
    "ðŸ¤Ž": ["brown", "heart"],
    "ðŸ’”": ["broken", "heart", "heartbreak"],
    "â£ï¸": ["exclamation", "heart", "heavy"],
    "ðŸ’•": ["two", "hearts", "love"],
    "ðŸ’ž": ["revolving", "hearts", "love"],
    "ðŸ’“": ["beating", "heart", "love"],
    "ðŸ’—": ["growing", "heart", "love"],
    "ðŸ’–": ["sparkling", "heart", "love"],
    "ðŸ’˜": ["arrow", "heart", "cupid", "love"],
    "ðŸ’": ["gift", "heart", "love"],
    "ðŸ”¥": ["fire", "flame", "hot", "lit"],
    "âœ¨": ["sparkle", "stars", "shine"],
    "ðŸ’«": ["dizzy", "star"],
    "â­": ["star", "favorite"],
    "ðŸŒŸ": ["glowing", "star"],
    "ðŸ’¯": ["hundred", "points", "perfect", "100"],
    "ðŸ’¢": ["anger", "symbol", "mad"],
    "ðŸ’¥": ["boom", "collision", "explode"],
    "ðŸ’¦": ["sweat", "droplets", "water"],
    "ðŸ’¨": ["dash", "away", "fast", "wind"],
    "ðŸ‘‹": ["wave", "hello", "hi", "bye"],
    "ðŸ¤š": ["raised", "back", "hand"],
    "ðŸ–ï¸": ["hand", "fingers", "splayed"],
    "âœ‹": ["raised", "hand", "stop"],
    "ðŸ––": ["vulcan", "salute", "spock"],
    "ðŸ‘Œ": ["ok", "okay", "perfect"],
    "ðŸ¤Œ": ["pinched", "fingers", "italian"],
    "ðŸ¤": ["pinching", "hand", "small"],
    "âœŒï¸": ["victory", "peace", "v"],
    "ðŸ¤ž": ["crossed", "fingers", "luck"],
    "ðŸ¤Ÿ": ["love", "you", "gesture", "rock"],
    "ðŸ¤˜": ["rock", "on", "metal", "horns"],
    "ðŸ¤™": ["call", "me", "hang", "loose", "shaka"],
    "ðŸ‘ˆ": ["left", "point", "backhand"],
    "ðŸ‘‰": ["right", "point", "backhand"],
    "ðŸ‘†": ["up", "point", "backhand"],
    "ðŸ‘‡": ["down", "point", "backhand"],
    "â˜ï¸": ["up", "point", "index"],
    "ðŸ‘": ["thumbs", "up", "like", "yes", "good"],
    "ðŸ‘Ž": ["thumbs", "down", "dislike", "no", "bad"],
    "âœŠ": ["fist", "raised", "power"],
    "ðŸ‘Š": ["fist", "bump", "punch"],
    "ðŸ¤›": ["left", "fist", "bump"],
    "ðŸ¤œ": ["right", "fist", "bump"],
    "ðŸ‘": ["clap", "applause", "hands"],
    "ðŸ™Œ": ["raising", "hands", "celebrate", "praise"],
    "ðŸ‘": ["open", "hands", "jazz"],
    "ðŸ¤²": ["palms", "up", "together"],
    "ðŸ¤": ["handshake", "deal", "agreement"],
    "ðŸ™": ["pray", "hands", "thank", "you", "namaste"],
    "ðŸ’ª": ["muscle", "strong", "flex", "bicep"],
    "ðŸ¦¾": ["mechanical", "arm", "prosthetic"],
    "ðŸ¦¿": ["mechanical", "leg", "prosthetic"],
    "ðŸ¦µ": ["leg", "kick"],
    "ðŸ¦¶": ["foot", "kick"],
    "ðŸ‘‚": ["ear", "listen"],
    "ðŸ¦»": ["ear", "hearing", "aid"],
    "ðŸ‘ƒ": ["nose", "smell"],
    "ðŸ§ ": ["brain", "smart", "think"],
    "ðŸ¦·": ["tooth", "dentist"],
    "ðŸ¦´": ["bone", "skeleton"],
    "ðŸ‘€": ["eyes", "look", "see", "watching"],
    "ðŸ‘ï¸": ["eye", "see", "look"],
    "ðŸ‘…": ["tongue", "lick"],
    "ðŸ‘„": ["mouth", "lips", "kiss"],
    "ðŸš€": ["rocket", "space", "launch", "fast"],
    "ðŸŽ‰": ["party", "popper", "celebrate", "confetti"],
    "ðŸŽŠ": ["confetti", "ball", "celebrate"],
    "ðŸŽˆ": ["balloon", "party"],
    "ðŸŽ": ["gift", "present", "box"],
    "ðŸ†": ["trophy", "win", "champion", "award"],
    "ðŸ¥‡": ["first", "place", "medal", "gold"],
    "ðŸ¥ˆ": ["second", "place", "medal", "silver"],
    "ðŸ¥‰": ["third", "place", "medal", "bronze"],
    "âš½": ["soccer", "ball", "football"],
    "ðŸ€": ["basketball", "ball"],
    "ðŸˆ": ["football", "american"],
    "âš¾": ["baseball", "ball"],
    "ðŸŽ¾": ["tennis", "ball"],
    "ðŸ": ["volleyball", "ball"],
    "ðŸ‰": ["rugby", "football"],
    "ðŸŽ±": ["billiards", "pool", "8", "ball"],
    "ðŸ“": ["ping", "pong", "table", "tennis"],
    "ðŸ¸": ["badminton", "racquet"],
    "ðŸ¥Š": ["boxing", "glove"],
    "ðŸ¥‹": ["martial", "arts", "uniform"],
    "â›³": ["golf", "flag", "hole"],
    "ðŸŽ¯": ["dart", "target", "bullseye"],
    "ðŸ¹": ["bow", "arrow", "archery"],
    "ðŸŽ£": ["fishing", "pole"],
    "ðŸ¥…": ["goal", "net"],
    "ðŸŽ®": ["game", "controller", "video", "gaming"],
    "ðŸ•¹ï¸": ["joystick", "game"],
    "ðŸŽ²": ["dice", "game", "random"],
    "ðŸ§©": ["puzzle", "piece"],
    "ðŸŽ­": ["performing", "arts", "theater", "drama"],
    "ðŸŽ¨": ["artist", "palette", "paint"],
    "ðŸ§µ": ["thread", "sewing"],
    "ðŸ§¶": ["yarn", "knitting"],
    "ðŸŽ¸": ["guitar", "rock", "music"],
    "ðŸŽ¹": ["piano", "keyboard", "music"],
    "ðŸŽº": ["trumpet", "horn", "music"],
    "ðŸŽ·": ["saxophone", "sax", "music"],
    "ðŸŽ»": ["violin", "music"],
    "ðŸ¥": ["drum", "music"],
    "ðŸ“±": ["phone", "mobile", "cell", "iphone"],
    "ðŸ’»": ["laptop", "computer", "macbook"],
    "âŒ¨ï¸": ["keyboard", "type"],
    "ðŸ–¥ï¸": ["desktop", "computer", "imac"],
    "ðŸ–¨ï¸": ["printer", "print"],
    "ðŸ–±ï¸": ["mouse", "computer"],
    "ðŸ’¾": ["floppy", "disk", "save"],
    "ðŸ’¿": ["cd", "disc", "optical"],
    "ðŸ“€": ["dvd", "disc"],
    "ðŸ§®": ["abacus", "calculation"],
    "ðŸŽ¥": ["camera", "movie", "film"],
    "ðŸ“·": ["camera", "photo"],
    "ðŸ“¹": ["video", "camera"],
    "ðŸ“ž": ["telephone", "phone", "call"],
    "â˜Žï¸": ["telephone", "phone", "old"],
    "ðŸ“º": ["tv", "television"],
    "ðŸ“»": ["radio", "broadcast"],
    "â°": ["alarm", "clock", "time"],
    "â±ï¸": ["stopwatch", "timer"],
    "â²ï¸": ["timer", "clock"],
    "ðŸ•°ï¸": ["mantelpiece", "clock", "time"],
    "âŒš": ["watch", "time", "apple", "watch"],
    "ðŸ“¡": ["satellite", "antenna", "dish"],
    "ðŸ”‹": ["battery", "power"],
    "ðŸ”Œ": ["plug", "electric", "power"],
    "ðŸ’¡": ["light", "bulb", "idea", "think"],
    "ðŸ”¦": ["flashlight", "torch"],
    "ðŸ•¯ï¸": ["candle", "light"],
    "ðŸ§¯": ["fire", "extinguisher"],
    "ðŸ›¢ï¸": ["oil", "drum", "barrel"],
    "ðŸ’¸": ["money", "flying", "wings"],
    "ðŸ’µ": ["dollar", "bill", "money"],
    "ðŸ’´": ["yen", "bill", "money"],
    "ðŸ’¶": ["euro", "bill", "money"],
    "ðŸ’·": ["pound", "bill", "money"],
    "ðŸ’°": ["money", "bag", "rich"],
    "ðŸ’³": ["credit", "card", "payment"],
    "ðŸ ": ["home", "house"],
    "ðŸ¡": ["house", "garden", "home"],
    "ðŸ¢": ["office", "building", "work"],
    "ðŸ£": ["post", "office", "japan"],
    "ðŸ¥": ["hospital", "medical", "health"],
    "ðŸ¦": ["bank", "money"],
    "ðŸ¨": ["hotel", "stay"],
    "ðŸ©": ["love", "hotel"],
    "ðŸª": ["convenience", "store", "shop"],
    "ðŸ«": ["school", "education"],
    "ðŸ¬": ["department", "store", "shop"],
    "ðŸ­": ["factory", "industry"],
    "ðŸ¯": ["castle", "japanese"],
    "ðŸ°": ["castle", "european"],
    "ðŸ’’": ["wedding", "church", "marriage"],
    "ðŸ—¼": ["tower", "tokyo", "eiffel"],
    "ðŸ—½": ["statue", "liberty", "new", "york"],
    "â›ª": ["church", "religion"],
    "ðŸ•Œ": ["mosque", "islam"],
    "ðŸ›•": ["hindu", "temple"],
    "ðŸ•": ["synagogue", "jewish"],
    "â›©ï¸": ["shinto", "shrine", "japan"],
    "ðŸ•‹": ["kaaba", "mecca", "islam"],
    "â›²": ["fountain", "water"],
    "â›º": ["tent", "camping"],
    "ðŸŒƒ": ["night", "stars", "city"],
    "ðŸŒ„": ["sunrise", "mountains"],
    "ðŸŒ…": ["sunrise", "water"],
    "ðŸŒ†": ["cityscape", "dusk", "sunset"],
    "ðŸŒ‡": ["sunset", "city"],
    "ðŸŒ‰": ["bridge", "night"],
    "ðŸŒŒ": ["milky", "way", "stars", "galaxy"],
    "ðŸŒ": ["earth", "globe", "europe", "africa"],
    "ðŸŒŽ": ["earth", "globe", "americas"],
    "ðŸŒ": ["earth", "globe", "asia", "australia"],
    "ðŸŒ": ["globe", "meridians", "world"],
    "ðŸ—ºï¸": ["world", "map"],
    "ðŸ—¾": ["japan", "map"],
    "ðŸŒ‹": ["volcano", "eruption"],
    "ðŸ—»": ["mount", "fuji", "mountain"],
    "ðŸ”ï¸": ["mountain", "snow", "capped"],
    "â›°ï¸": ["mountain"],
    "ðŸ•ï¸": ["camping"],
    "ðŸ–ï¸": ["beach", "umbrella", "vacation"],
    "ðŸœï¸": ["desert"],
    "ðŸï¸": ["island", "desert"],
    "ðŸžï¸": ["national", "park"],
    "ðŸŒ²": ["evergreen", "tree", "pine"],
    "ðŸŒ³": ["tree", "deciduous"],
    "ðŸŒ´": ["palm", "tree", "tropical"],
    "ðŸŒµ": ["cactus", "desert"],
    "ðŸŒ¾": ["sheaf", "rice", "grain"],
    "ðŸŒ¿": ["herb", "plant", "leaf"],
    "â˜˜ï¸": ["shamrock", "clover", "irish", "luck"],
    "ðŸ€": ["four", "leaf", "clover", "luck"],
    "ðŸ": ["maple", "leaf", "canada"],
    "ðŸ‚": ["fallen", "leaf", "autumn"],
    "ðŸƒ": ["leaf", "fluttering", "wind"],
}


def search_emoji(query):
    """Search for emojis matching the query"""
    query_lower = query.lower().strip()

    if not query_lower:
        # Show popular emojis when no query
        popular = ["ðŸ˜€", "â¤ï¸", "ðŸ‘", "ðŸ”¥", "âœ¨", "ðŸ’¯", "ðŸŽ‰", "ðŸš€", "ðŸ’ª", "ðŸ™"]
        return [(emoji, EMOJI_DATABASE[emoji]) for emoji in popular]

    results = []

    # Search through all emojis
    for emoji, keywords in EMOJI_DATABASE.items():
        # Check if query matches any keyword
        if any(query_lower in keyword for keyword in keywords):
            results.append((emoji, keywords))
        # Check if emoji itself matches (for copy-paste searches)
        elif query_lower in emoji:
            results.append((emoji, keywords))

    return results[:20]  # Limit to 20 results


def main():
    # Get query from command line argument
    query = sys.argv[1] if len(sys.argv) > 1 else ""

    # Search for matching emojis
    results = search_emoji(query)

    if not results:
        output = {
            "results": [
                {
                    "title": "No emojis found",
                    "subtitle": f"No matches for '{query}'",
                    "command": "echo 'No emoji found' | wl-copy",
                }
            ]
        }
    else:
        output = {
            "results": [
                {
                    "title": f"{emoji}  {' '.join(keywords[:3])}",
                    "subtitle": f"Press Enter to copy {emoji}",
                    "command": f"echo -n '{emoji}' | wl-copy && notify-send 'Emoji Copied' '{emoji}'",
                }
                for emoji, keywords in results
            ]
        }

    print(json.dumps(output, indent=2))


if __name__ == "__main__":
    main()
